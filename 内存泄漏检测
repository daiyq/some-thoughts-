内存泄漏检测办法
update：
用这个方法：
        http://www.cnblogs.com/skynet/archive/2011/02/20/1959162.html
        
        
——————————————————分割线——————————————————————————————————————————————
Windows下：
可使用 Visual C++ 的 C Runtime Library（CRT） 检测内存泄漏
首先，我们在两个 .c 文件首行插入这一段代码：

#ifdef _WINDOWS
#define _CRTDBG_MAP_ALLOC
#include <crtdbg.h>
#endif

并在 main() 开始位置插入：

int main() {
#ifdef _WINDOWS
    _CrtSetDbgFlag(_CRTDBG_ALLOC_MEM_DF | _CRTDBG_LEAK_CHECK_DF);
#endif

在 Debug 配置下按 F5 生成、开始调试程序，没有任何异样。

在 Linux、OS X 下：
我们可以使用 valgrind 工具（用 apt-get install valgrind、 brew install valgrind）。我们完全不用修改代码，只要在命令行执行（例如）：
$ valgrind --leak-check=full  ./leptjson_test
